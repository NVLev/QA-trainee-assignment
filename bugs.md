***Автор***: Наталья Левант

***Проект***: Микросервис из тестового задания №2.1 для стажёра QA-направления (зимняя волна 2025)

***Операционная система тестирования***:   Linux Ubuntu 24.04.1 LTS

## Баг 1: Отсутствует валидация обязательных полей
### 1.1 : Отсутствует валидация обязательного поля `sellerID`
- **Описание**: При создании объявления без поля `sellerID` сервер возвращает статус `200 OK` вместо `400 Bad Request`.
- **Серьезность**: Critical .
- **Приоритет**: High.
- **Шаги для воспроизведения**:
  1. Отправить POST-запрос на `/api/1/item` с телом:
     ```json
     {
       "name": "Test Item",
       "price": 1000
     }
     ```
  2. Проверить статус ответа.
- **Ожидаемый результат**: 
  - Статус ответа: `400 Bad Request`.
  - В ответе есть сообщение об ошибке (например, `"sellerID is required"`).
- **Фактический результат**:
  - Статус ответа: `200 OK`.
- **Дополнительно**:
  - Ошибка нарушает спецификацию API (см. `swagger.yaml`).

### 1.2: Отсутствует валидация обязательного поля `name`
- **Описание**: При создании объявления без поля `name` сервер возвращает статус `200 OK` вместо `400 Bad Request`.
- **Серьезность**: Critical .
- **Приоритет**: High.
- **Шаги для воспроизведения**:
  1. Отправить POST-запрос на `/api/1/item` с телом:
     ```json
     {
       "sellerID": 111112,
       "price": 100
     }
     ```
  2. Проверить статус ответа.
- **Ожидаемый результат**: 
  - Статус ответа: `400 Bad Request`.
  - В ответе есть сообщение об ошибке (например, `"sellerID is required"`).
- **Фактический результат**:
  - Статус ответа: `200 OK`.
- **Дополнительно**:
  - Ошибка нарушает спецификацию API (см. `swagger.yaml`).

### 1.3: Отсутствует валидация обязательного поля `price`
- **Описание**: При создании объявления без поля `name` сервер возвращает статус `200 OK` вместо `400 Bad Request`.
- **Серьезность**: Critical .
- **Приоритет**: High.
- **Шаги для воспроизведения**:
  1. Отправить POST-запрос на `/api/1/item` с телом:
     ```json
     {
       "sellerID": 111113,
       "name": "Neg_test Item"
     }
     ```
  2. Проверить статус ответа.
- **Ожидаемый результат**: 
  - Статус ответа: `400 Bad Request`.
  - В ответе есть сообщение об ошибке (например, `"sellerID is required"`).
- **Фактический результат**:
  - Статус ответа: `200 OK`.
- **Дополнительно**:
  - Ошибка нарушает спецификацию API (см. `swagger.yaml`).

## Баг 2: Некорректное сохранение/возврат поля `name` при создании объявления
- **Описание**: При создании объявления с указанным `name` сервер сохраняет или возвращает другое значение (например, `"dsdsd"` вместо переданного `"Test Item for GET"`).
- **Серьезность**: Critical .
- **Приоритет**: High.
- **Шаги для воспроизведения**:
  1. Создать объявление через POST `/api/1/item` с телом:
     ```json
     {
       "sellerID": 789012,
       "name": "Test Item for GET",
       "price": 750
     }
     ```
  2. Извлечь `id` из поля `status` в ответе.
  3. Отправить GET-запрос на `/api/1/item/{id}`.
  4. Проверить значение поля `name` в ответе.
- **Ожидаемый результат**:
  - Поле `name` в GET-ответе соответствует переданному при создании (`"Test Item for GET"`).
- **Фактический результат**:
  - Поле `name` содержит некорректное значение (например, `"dsdsd"`).
- **Дополнительно**:
  - Ошибка нарушает контракт API: поле `name` должно сохраняться и возвращаться без изменений.
  - Проблема может быть связана с:
    - Некорректной обработкой входных данных на сервере.
    - Перезаписью поля `name` дефолтными или случайными значениями.

  
## Баг 3: Несоответствие документации и поведения API для поля `id`
- **Описание**: При запросе несуществующего объявления c id с типом данных string сервер возвращает статус `400 Bad Request` вместо `404 Not Found`.
Поскольку в документации для GET /api/1/item/{id} параметр id описан как type: string, без ограничений на формат, любой строковый id допустим, и сервер должен возвращать 404, а не 400.
- При этом для валидного UUID (но несуществующего) возвращается корректный `404 Not Found`.
- **Серьезность**: Major.
- **Приоритет**: Middle.
- **Шаги для воспроизведения**:
  1. Отправить GET-запрос на `/api/1/item/nonexistent-id` (не UUID).
  2. Проверить статус ответа.
- **Ожидаемый результат**:
  - Если `id` должен быть UUID, документация должна явно указывать это.
  - Для не-UUID ID ожидается `400 Bad Request` с сообщением о невалидном формате.
- **Фактический результат**:
  - Документация описывает `id` как строку без ограничений.
  - Сервер возвращает `400` для не-UUID, но это не задокументировано.
- **Рекомендации**:
  - **Вариант 1**: Исправить документацию, указав, что `id` должен быть UUID.
  - **Вариант 2**: Разрешить любой строковый `id` и возвращать `404` для несуществующих записей независимо от формата.

## Баг 4: Отсутствие спецификации формата `id` в swagger.yaml
- **Описание**: 
  - В `swagger.yaml` для параметра `id` в ручках `/api/1/item/{id}` и `/api/1/statistic/{id}` не указан формат (например, UUID).
  - Это приводит к неоднозначности: клиенты API не знают, какие значения допустимы.
- **Серьезность**: Minor.
- **Приоритет**: Low.
- **Шаги для воспроизведения**:
  1. Открыть `swagger.yaml`.
  2. Проверить описание параметра `id` для `/api/1/item/{id}`.
- **Ожидаемый результат**:
  - Параметр `id` имеет явное указание формата (например, `format: uuid`).
- **Фактический результат**:
  - Параметр описан только как `type: string`.
- **Рекомендации**:
  - Добавить в спецификацию `format: uuid` для всех полей `id`.
  - Обновить примеры значений в документации.

## Баг 5: Некорректный статус ответа для несуществующего sellerID
- **Описание**: 
  - GET-запрос `/api/1/{sellerID}/item` возвращает `200 OK` с пустым массивом вместо `404 Not Found`.
- **Серьезность**: Major.
- **Приоритет**: Middle.
- **Шаги**:
  1. Создать случайный `sellerID` (например, `482571`).
  2. Убедиться, что объявлений с этим `sellerID` нет.
  3. Отправить GET-запрос `/api/1/482571/item`.
- **Ожидаемый результат**:
  - Статус: `404 Not Found`.
  - Тело ответа содержит сообщение об ошибке.
- **Фактический результат**:
  - Статус: `200 OK`.
  - Тело ответа: `[]`.